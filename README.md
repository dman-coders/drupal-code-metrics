# drupal-code-metrics

Performs analysis on Drupal project codebases to summarize code quality

Built to run large-scale code analysis, 
this utility will build a database of all code files it scans,
and then present analysis of what it found in various ways.

## Usage

Point it at the root of a Drupal site, or the sites/all/modules path of the site.

  dcm sites/all/modules
  
It will first index all files and figure out the module folders within that tree
On second run, it will start running the code sniffer over each module, and calculating ratings for it.


## Operations

Where possible, clean duplicate modules found on a system with the same version numbers will not be re-indexed.
The main module+version index is site-wide. 
This is so the one tool can be run over dozens of unique sites somewhat efficiently.

When identifying modules - if a git checkout is found (such as a dev or submodule checkout) 
that git origin repository will be used as a unique identifier.

It leverages PHP CodeSniffer to find errors-per-file, and uses that as one metric.

It should use the Drupal "Hacked!" module also, to evaluate the 
amount of patches or the stability of some modules.

Using various ways of interpreting common Drupal Site installation
patterns, it should be able to subdivide the found code into "contrib"
vs "custom" and "patched", and report on that.

Some precepts this tool uses to create summaries:

* Less custom code is good.
  The proportion of 'special' code to supported modules
  tells us a lot about the maintainability of a site.
* Bad code style is a smell of bad code.
  /Although not conclusively provable/, the results of low scores in
  existing PHP integrity tests are highly correlated with technical debt,
  logical bugs, and are indicative of other code problems.
* Complexity metrics devised and used by the experts who study this topic
  full-time DO have merit
  
"Features" modules, which are largely autogenerated, are exempt from being
labelled "custom code" and are usually a sign of *good* code discipline, 
so do not count against certain measures.
